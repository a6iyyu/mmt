generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model dosen {
  id_dosen         Int                @id @default(autoincrement())
  nama_lengkap     String             @db.VarChar(50)
  nip              String             @unique
  surel            String             @unique
  keahlian         String?
  linkedin         String?            @unique
  sinta            String?            @unique @db.VarChar(255)
  scholar          String?            @unique @db.VarChar(255)
  jabatan          String?
  foto_profil      String?
  bio              String?            @db.Text
  riset_penelitian riset_penelitian[] @relation("riset_penelitian")
  created_at       DateTime           @default(now())
  updated_at       DateTime           @updatedAt
}

model karya {
  id_karya          Int         @id @default(autoincrement())
  judul             String
  slug              String      @unique
  deskripsi         String      @db.Text
  gambar            String
  tautan_demo       String?     @unique
  tautan_repo       String?     @unique
  dilihat           Int         @default(0)
  unggulan          Boolean     @default(false)
  status            Publikasi   @default(DRAF)
  tanggal_publikasi DateTime?
  kategori          Kategori[]
  mahasiswa         mahasiswa[] @relation("karya")
  teknologi         teknologi[] @relation("teknologi_karya_mahasiswa")
  created_at        DateTime    @default(now())
  updated_at        DateTime    @updatedAt
}

model mahasiswa {
  id_mahasiswa  Int      @id @default(autoincrement())
  nama_lengkap  String   @db.VarChar(50)
  nim           String   @unique
  program_studi Prodi
  angkatan      Int
  foto_profil   String?
  bio           String?  @db.Text
  surel         String?  @unique
  linkedin      String?  @unique
  whatsapp      String?  @unique
  karya         karya[]  @relation("karya")
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
}

model pelatihan {
  id_pelatihan     Int          @id @default(autoincrement())
  nama             String       @unique
  slug             String       @unique
  deskripsi        String       @db.Text
  tanggal          DateTime
  mentor           String
  kategori         Kategori[]
  lokasi           String
  gambar           String
  kuota            Int?
  buka_pendaftaran Ketersediaan @default(DIBUKA)
  status           Publikasi    @default(DRAF)
  created_at       DateTime     @default(now())
  updated_at       DateTime     @updatedAt
}

model pengguna {
  id_pengguna  Int      @id @default(autoincrement())
  nama_lengkap String
  surel        String   @unique
  kata_sandi   String
  peran        Peran    @default(ADMIN)
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

model riset_penelitian {
  id_riset_penelitian Int        @id @default(autoincrement())
  judul               String
  slug                String     @unique
  deskripsi           String     @db.Text
  gambar              String
  tautan              String     @unique
  status              Publikasi  @default(DRAF)
  tanggal_publikasi   DateTime?
  kategori            Kategori[]
  dosen               dosen[]    @relation("riset_penelitian")
  created_at          DateTime   @default(now())
  updated_at          DateTime   @updatedAt
}

model sertifikat {
  id_sertifikat    Int      @id @default(autoincrement())
  nomor_sertifikat String   @unique
  nama_penerima    String
  peran            String
  nama_kegiatan    String
  tanggal_terbit   DateTime
  tautan_berkas    String?
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt
}

model teknologi {
  id_teknologi Int     @id @default(autoincrement())
  nama         String  @unique
  karya        karya[] @relation("teknologi_karya_mahasiswa")
}

enum Kategori {
  GAME_DEVELOPMENT @map("Game Development")
  UI_UX            @map("UI/UX Design")
  AR_VR            @map("AR/VR")
  ANIMASI          @map("Animasi")
  MULTIMEDIA       @map("Multimedia")
  LAINNYA          @map("Lainnya")
}

enum Ketersediaan {
  DIBUKA
  PENUH
  AKAN_DATANG @map("AKAN DATANG")
}

enum Peran {
  ADMIN
}

enum Prodi {
  TI
  SIB
  PPLS
}

enum Publikasi {
  DIJADWALKAN
  DRAF
  DITERBITKAN
  DIARSIPKAN
}