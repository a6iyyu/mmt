generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "mysql"
}

model dosen {
  id_dosen         Int                @id @default(autoincrement())
  nama_lengkap     String             @db.VarChar(50)
  nip              String             @unique
  keahlian         Kategori
  jabatan          Jabatan
  foto_profil      String?
  bio              String?            @db.Text
  linkedin         String?            @unique
  surel            String             @unique
  sinta            String?            @unique @db.VarChar(255)
  scholar          String?            @unique @db.VarChar(255)
  whatsapp         String?            @unique
  riset_penelitian riset_penelitian[] @relation("riset_penelitian")
  created_at       DateTime           @default(now())
  updated_at       DateTime           @updatedAt
}

model karya {
  id_karya          Int         @id @default(autoincrement())
  judul             String
  slug              String      @unique
  deskripsi         String      @db.Text
  gambar            String
  tautan_demo       String?     @unique
  tautan_repo       String?     @unique
  dilihat           Int         @default(0)
  unggulan          Boolean     @default(false)
  status            Publikasi   @default(SEDANG_BERLANGSUNG)
  tanggal_publikasi DateTime?
  kategori          Kategori
  mahasiswa         mahasiswa[] @relation("karya")
  teknologi         teknologi[] @relation("teknologi_karya_mahasiswa")
  created_at        DateTime    @default(now())
  updated_at        DateTime    @updatedAt
}

model mahasiswa {
  id_mahasiswa  Int      @id @default(autoincrement())
  nama_lengkap  String   @db.VarChar(50)
  nim           String   @unique
  program_studi Prodi
  angkatan      Int
  foto_profil   String?
  bio           String?  @db.Text
  github        String?  @unique
  linkedin      String?  @unique
  surel         String?  @unique
  whatsapp      String?  @unique
  karya         karya[]  @relation("karya")
  status        Status   @default(AKTIF)
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
}

model pelatihan {
  id_pelatihan     Int          @id @default(autoincrement())
  nama             String       @unique
  slug             String       @unique
  deskripsi        String       @db.Text
  tanggal          DateTime
  mentor           String
  kategori         Kategori
  lokasi           String
  gambar           String
  kuota            Int?
  buka_pendaftaran Ketersediaan @default(DIBUKA)
  created_at       DateTime     @default(now())
  updated_at       DateTime     @updatedAt
}

model pengguna {
  id_pengguna  Int      @id @default(autoincrement())
  nama_lengkap String
  surel        String   @unique
  kata_sandi   String
  peran        Peran    @default(ADMIN)
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
}

model riset_penelitian {
  id_riset_penelitian Int       @id @default(autoincrement())
  judul               String
  slug                String    @unique
  deskripsi           String    @db.Text
  gambar              String
  tautan              String    @unique
  status              Publikasi @default(SEDANG_BERLANGSUNG)
  tanggal_publikasi   DateTime?
  kategori            Kategori
  dosen               dosen[]   @relation("riset_penelitian")
  created_at          DateTime  @default(now())
  updated_at          DateTime  @updatedAt
}

model sertifikat {
  id_sertifikat    Int      @id @default(autoincrement())
  nomor_sertifikat String   @unique
  nama_penerima    String
  peran            String
  nama_kegiatan    String
  tanggal_terbit   DateTime
  tautan_berkas    String?
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt
}

model teknologi {
  id_teknologi Int     @id @default(autoincrement())
  nama         String  @unique
  karya        karya[] @relation("teknologi_karya_mahasiswa")
}

enum Jabatan {
  ASISTEN_AHLI
  LEKTOR
  LEKTOR_KEPALA
  GURU_BESAR
}

enum Kategori {
  GAME_DEVELOPMENT
  UI_UX
  AR_VR
  ANIMASI
  MULTIMEDIA
  LAINNYA
}

enum Ketersediaan {
  DIBUKA
  PENUH
  AKAN_DATANG
}

enum Peran {
  ADMIN
}

enum Prodi {
  TI
  SIB
  PPLS
  MI
  RTI
}

enum Publikasi {
  DIJADWALKAN
  SEDANG_BERLANGSUNG
  SUDAH_TERBIT
  DIARSIPKAN
}

enum Status {
  AKTIF
  CUTI
  LULUS
}